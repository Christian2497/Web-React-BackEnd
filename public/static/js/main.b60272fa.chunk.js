(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(81),l=a.n(s),i=a(21),o=a(13),u=a(14),c=a(17),m=a(16),p=(a(91),a(92),a(11)),h=a(27),g=a.n(h),d=a(39),v=a(83),b=a.n(v),E=new(function(){function e(){Object(o.a)(this,e),this.auth=b.a.create({baseURL:"http://localhost:4000",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.email,n=e.weight,r=e.goal,s=e.password,l=e.repeatPassword;return this.auth.post("/signup",{username:t,email:a,weight:n,goal:r,password:s,repeatPassword:l}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.email,a=e.password;return this.auth.post("/login",{email:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/me").then((function(e){return e.data}))}}]),e}()),f=r.a.createContext(),w=f.Consumer,j=f.Provider,O=function(e){return function(t){Object(c.a)(n,t);var a=Object(m.a)(n);function n(){return Object(o.a)(this,n),a.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(w,null,(function(a){var n=a.login,s=a.signup,l=a.user,i=a.logout,o=a.isLoggedin;return r.a.createElement(e,Object.assign({login:n,signup:s,user:l,logout:i,isLoggedin:o},t.props))}))}}]),n}(n.Component)},y=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedin:!1,user:null,isLoading:!0},e.signup=function(t){var a=t.username,n=t.email,r=t.weight,s=t.goal,l=t.password,i=t.repeatPassword;E.signup({username:a,email:n,weight:r,goal:s,password:l,repeatPassword:i}).then((function(t){return e.setState({isLoggedin:!0,user:t})}))},e.login=function(){var t=Object(d.a)(g.a.mark((function t(a){var n,r,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.email,r=a.password,t.prev=1,t.next=4,E.login({email:n,password:r});case 4:s=t.sent,e.setState({isLoggedin:!0,user:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.logout=Object(d.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.logout();case 3:e.setState({isLoggedin:!1,user:null}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,s=this.login,l=this.logout,i=this.signup;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(j,{value:{isLoggedin:a,user:n,login:s,logout:l,signup:i}},this.props.children)}}]),a}(n.Component),C=O(function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(i.b,{to:"/",id:"home-btn"},r.a.createElement("h4",null,"Home")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"navbar-user"},"username:",t.username),r.a.createElement("button",{className:"navbar-button",onClick:a},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/login"},r.a.createElement("button",{className:"navbar-button"},"Login")),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/signup"},r.a.createElement("button",{className:"navbar-button"},"Sign Up"))))}}]),a}(n.Component));var k=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"))},L=a(25),P=a(85),S=O(function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",weight:0,goal:0,password:"",repeatPassword:"",message:"",isError:{name:"",email:"",password:"",repeatPassword:""}},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.email,s=a.weight,l=a.goal,i=a.password,o=a.repeatPassword;e.props.signup({username:n,email:r,weight:s,goal:l,password:i,repeatPassword:o})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value,s=RegExp(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/),l=Object(P.a)({},e.state.isError);switch(n){case"username":l.name=r.length<1?"Introduce your name ":"";break;case"email":l.email=s.test(r)?"":"Email address is invalid";break;case"password":l.password=r.length<6?"Introduce a password with at least 6 characters":"";break;case"repeatPassword":l.repeatPassword=r!==e.state.password?"Passwords don't match":""}e.setState(Object(L.a)({isError:l},n,r))},e.errorMessage=function(){e.setState({message:"This email already exists. Try another one!"})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.weight,s=e.goal,l=e.password,o=e.repeatPassword;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange,required:!0}),this.state.isError.name.length>0&&r.a.createElement("span",{className:"invalid-feedback"},this.state.isError.name)),r.a.createElement("div",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:a,onChange:this.handleChange,required:!0}),this.state.isError.email.length>0&&r.a.createElement("span",{className:"invalid-feedback"},this.state.isError.email)),r.a.createElement("label",null,"Weight:"),r.a.createElement("input",{type:"number",name:"weight",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Goal:"),r.a.createElement("input",{type:"number",name:"goal",value:s,onChange:this.handleChange}),r.a.createElement("div",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:l,onChange:this.handleChange,required:!0}),this.state.isError.password.length>0&&r.a.createElement("span",{className:"invalid-feedback"},this.state.isError.password)),r.a.createElement("div",null,r.a.createElement("label",null,"Repeat Password:"),r.a.createElement("input",{type:"password",name:"repeatPassword",value:o,onChange:this.handleChange,required:!0}),this.state.isError.repeatPassword.length>0&&r.a.createElement("span",{className:"invalid-feedback"},this.state.isError.repeatPassword)),r.a.createElement("input",{type:"submit",value:"Signup",onClick:this.errorMessage}),r.a.createElement("div",null,this.state.message)),r.a.createElement("p",null,"Already have account?"),r.a.createElement(i.b,{to:"/login"}," Login"))}}]),a}(n.Component)),x=O(function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;e.props.login({email:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(L.a)({},n,r))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),a}(n.Component)),N=O(function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",this.props.user.username))}}]),a}(n.Component)),A=a(30),F=O((function(e){var t=e.component,a=e.isLoggedin,n=Object(A.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(p.a,{to:"/profile"}):r.a.createElement(t,e)}}))})),q=O((function(e){var t=e.component,a=e.isLoggedin,n=Object(A.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))})),U=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(y,null,r.a.createElement("div",{className:"container"},r.a.createElement(C,null),r.a.createElement(p.d,null,r.a.createElement(F,{exact:!0,path:"/",component:k}),r.a.createElement(F,{exact:!0,path:"/signup",component:S}),r.a.createElement(F,{exact:!0,path:"/login",component:x}),r.a.createElement(q,{exact:!0,path:"/private",component:N}))))}}]),a}(n.Component);l.a.render(r.a.createElement(i.a,null,r.a.createElement(U,null)),document.getElementById("root"))},86:function(e,t,a){e.exports=a(136)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.b60272fa.chunk.js.map